<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>Retro Gaming w/ Modern UI Tools</title>

    <meta name="description" content="" />
    <meta name="author" content="Simon Mika" />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="https://reveal.simonmika.com/dist/reset.css" />
    <link
      rel="stylesheet"
      href="https://reveal.simonmika.com/dist/reveal.css"
    />
    <link
      rel="stylesheet"
      href="https://reveal.simonmika.com/dist/theme/night.css"
      id="theme"
    />

    <!-- Theme used for syntax highlighting of code -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"
    />
    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement("link");
      link.rel = "stylesheet";
      link.type = "text/css";
      link.href = window.location.search.match(/print-pdf/gi)
        ? "css/print/pdf.css"
        : "css/print/paper.css";
      document.getElementsByTagName("head")[0].appendChild(link);
    </script>
    <!--[if lt IE 9]>
      <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
    <style>
      .reveal a {
        color: inherit;
      }
      a[href^="http"]:after {
        content: " " attr(href);
        font-size: 0.75em;
      }
      .reveal table td {
        text-align: inherit;
      }

      .reveal h1,
      .reveal h2,
      .reveal h3,
      .reveal h4,
      .reveal h5,
      .reveal h6,
      .reveal h7 {
        text-transform: none;
      }

      .reveal section img {
        border: none;
        box-shadow: none;
      }

      .reveal pre code {
        tab-size: 2;
        -moz-tab-size: 2;
        overflow: hidden;
      }

      .reveal section img {
        background: none;
      }

      .reveal a {
        color: inherit;
      }
      .reveal em {
        font-style: normal;
        font-weight: bolder;
      }
      .reveal a:hover,
      .reveal em {
        color: #cc0000;
      }
      .reveal .small,
      .reveal .small pre {
        font-size: 0.75em;
      }
      a[href^="http"]::after {
        content: none;
      }
    </style>
  </head>

  <body>
    <div class="reveal">
      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section>
          <img src="https://style.cogneco.com/logo/cogneco-v6w.svg" />
        </section>
        <section>
          <h1>Retro Game w/ Modern UI Tools</h1>
          <h4>Simon Mika</h4>
        </section>
        <section>
          <section>
            <h1>Simon Mika</h1>
          </section>
          <section>
            <img src="https://style.cogneco.com/logo/cogneco-v6w.svg" />
          </section>
          <section>
            <h3>Interim</h3>
            <ul class="fragment">
              <li>CTO</li>
              <li>Engineering Manager</li>
              <li>Product Manager</li>
              <li>Agile Advisor</li>
            </ul>
          </section>
          <section>
            <img
              style="width: 10em"
              src="./figures/vidhance-dark.svg"
            />
            <img
              style="width: 10em"
              src="./figures/payfunc-d08.svg"
            />
            <img
              style="width: 10em"
              src="./figures/intergiro-medium-dark.svg"
            />
            <img
              style="width: 10em"
              src="./figures/Pax2pay-Logo-Light-Bright-Green.svg"
            />
          </section>
          <section>
            <img style="width: 30vw" src="./figures/yuniq-dark.svg" />
            <p>Vice President of Operations, Europe</p>
          </section>
          <section>
            <img style="width: 10vh" src="./figures/yuniq-dark.svg" />
            <p>
              <em>140</em> developers, testers, product & engineering managers &
              others
            </p>
            <ul>
              <li>Perfect Doc Studio & Compass</li>
              <li>
                Salesforce, Decisions & PEGA implementations
              </li>
              <li>SaaS development</li>
            </ul>
          </section>
          <section>
            <img src="./figures/perfect-doc-studio.svg" />
          </section>
          <section>
            <img
              style="height: 36vh; margin: 0 4vh"
              src="./figures/uppsalajs.svg"
            />
            <p>
              <a href="https://meetup.com/uppsalajs"
                >&nbsp;meetup.com/uppsalajs&nbsp;</a
              >
            </p>
          </section>
          <section data-background-iframe="http://simonmika.com/talk">
            <p>
              <a
                style="
                  background: #000000aa;
                  padding: 0.5em;
                  border-radius: 2em;
                "
                href="http://simonmika.com"
                >&nbsp;simonmika.com&nbsp;</a
              >
            </p>
          </section>
        </section>
        <section>
          <section>
            <h1>Retro Game w/ Modern UI Tools</h1>
          </section>
        </section>
				<section>
					<section data-background-image="figures/adventures-of-aron.png">
					</section>
					<section data-background-iframe="https://stenciljs.com"></section>
					<section>
						<h2><a href="http://github.com/simonmika/adventures-of-aron">github.com/simonmika/adventures-of-aron</a></h2>
					</section>
				</section>
				<section>
					<section>
						<h1>State</h1>
					</section>
					<section>
						<h2>State</h2>
						<ul>
							<li class="fragment">hero</li>
							<li class="fragment">map</li>
							<li class="fragment">item</li>
						</ul>
					</section>
					<section>
						<h2>Hero</h2>
						<pre><code data-trim data-noescape class="small">
export class Hero {
	constructor(readonly position: Point, readonly facing: Direction = "down") {}
	move(direction: Direction): Hero {
		return new Hero(this.position.move(direction), direction)
	}
	face(direction: Direction): Hero {
		return new Hero(this.position, direction)
	}
}
						</pre></code>
					</section>
					<section>
						<h2>Map</h2>
						<pre><code data-trim data-noescape class="small">
export class Map {
	readonly size: { readonly width: number; readonly height: number }
	private readonly tiles: readonly Tile[][]
	*layer(layer: Tile.Layer): Generator<Tile | undefined> {
		for (const tile of this.tiles.flat())
			if (tile.layer == layer)
				yield tile
	}
	*items(): Generator<Item> {
		for (const tile of this.tiles.flat())
			if (tile.item)
				yield tile.item
	}
}
						</pre></code>
					</section>
					<section>
						<h2>Tile</h2>
						<pre><code data-trim data-noescape class="small">
export abstract class Tile {
	abstract readonly type: Type
	abstract readonly layer: Layer
	abstract walkable: boolean
	constructor(public readonly position: Point, public readonly map: Map, public readonly item?: Item) {}
	place(item: Item): Tile {
		return new types[this.type]!(this.position, this.map, item)
	}
	collect(): Tile {
		return new types[this.type]!(this.position, this.map) as Tile
	}
}
						</pre></code>
					</section>
					<section>
						<h2>Item</h2>
						<pre><code data-trim data-noescape class="small">
export class Item {
	constructor(readonly type: Item.Type, readonly position: Point) {}
}
						</pre></code>
					</section>
					<section>
						<h2>Game</h2>
						<pre><code data-trim data-noescape class="small">
export class Game {
	constructor(readonly map: Map, readonly hero: Hero) {}

	move(direction: Direction): Game {
		let hero = this.hero.move(direction)
		const tile = this.map.get(hero.position)
		if (!tile.walkable)
			hero = this.hero.face(direction)
		const map = tile.walkable && tile.item ? this.map.set(tile.collect()) : this.map
		return new Game(map, hero)
	}
	static async fetch(url: string): Promise<Game | undefined> {
		const level = await (await fetch(url)).json()
		return Level.is(level) ? Level.load(level) : undefined
	}
}
						</pre></code>
					</section>
				</section>
				<section>
					<section>
						<h1>User Interface</h1>
					</section>
					<section>
						<h2>Tiles</h2>
						<img class="fragment" src="figures/assets/tiles/gravel.svg">
						<img class="fragment" src="figures/assets/tiles/forest.svg">
					</section>
					<section>
						<h2>Z-order</h2>
						<img class="fragment" src="figures/assets/tiles/forest.svg">
						<img class="fragment" src="figures/assets/hero/up.svg">
						<img class="fragment" src="figures/assets/items/coin.svg">
						<img class="fragment" src="figures/assets/tiles/gravel.svg">
					</section>
					<section>
						<h2>Game</h2>
						<pre><code data-trim data-noescape class="small">
@Component({ tag: "aron-game", styleUrl: "style.css", scoped: true, })
export class AronGame implements ComponentWillLoad {
	@State() game?: model.Game
	async componentWillLoad(): Promise<void> {
		this.game = await model.Game.fetch("/assets/levels/level0.json")
	}
	render() {
		return &lt;Host&gt;	{!this.game ? "loading.." : (
					&lt;Fragment&gt;
						&lt;aron-layer layer="ground" map={this.game.map}&gt;&lt;/aron-layer&gt;
						&lt;aron-items map={this.game.map}&gt;&lt;/aron-items&gt;
						&lt;aron-hero hero={this.game.hero}&gt;&lt;/aron-hero&gt;
						&lt;aron-layer layer="canopy" map={this.game.map}&gt;&lt;/aron-layer&gt;
					&lt;/Fragment&gt;
				)}&lt;/Host&gt; }
}
						</pre></code>
					</section>
					<section>
						<h2>Interactivity</h2>
						<pre><code data-trim data-noescape class="small">
@Listen("keydown", { target: "window" })
	onKeyDown(event: KeyboardEvent) {
		let direction: model.Direction | undefined
		switch (event.key) {
			case "ArrowLeft": direction = "left";	break
			case "ArrowRight": direction = "right";	break
			case "ArrowUp": direction = "up";	break
			case "ArrowDown": direction = "down";	break
		}
		if (direction)
			this.game = this.game?.move(direction)
	}
						</pre></code>
					</section>
					<section>
						<h2>Layer</h2>
						<pre><code data-trim data-noescape class="small">
@Component({ tag: "aron-layer", styleUrl: "style.css", scoped: true, })
export class AronLayer {
	@Prop() layer: model.Tile.Layer
	@Prop() map: model.Map
	render() {
		return (
			&lt;Host&gt;
				{[...this.map.layer(this.layer)].map(tile =&gt; (
					&lt;aron-tile tile={tile}&gt;&lt;/aron-tile&gt;
				))}
			&lt;/Host&gt;
		)
	}
}
						</pre></code>
					</section>
					<section>
						<h2>Tile</h2>
						<pre><code data-trim data-noescape class="small">
@Component({ tag: "aron-tile",	styleUrl: "style.css",	scoped: true, })
export class AronTile {
	@Prop() tile: model.Tile
	render() {
		return &lt;Host
				style={{
					left: (this.tile.position.x * 64).toString() + "px",
					top: (this.tile.position.y * 64).toString() + "px",
				}}&gt;
				&lt;img src={`/assets/tiles/${this.tile.type}.svg`} /&gt;
			&lt;/Host&gt;
	}
}
						</pre></code>
					</section>
					<section>
						<h2>Hero</h2>
						<pre><code data-trim data-noescape class="small">
@Component({ tag: "aron-hero",	styleUrl: "style.css",	scoped: true,})
export class AronHero {
	@Prop() hero: model.Hero
	render() {
		return (
			&lt;Host
				style={{
					left: (this.hero.position.x * 64).toString() + "px",
					top: (this.hero.position.y * 64).toString() + "px",
				}}&gt;
				&lt;img src={`/assets/hero/${this.hero.facing}.svg`} /&gt;
			&lt;/Host&gt;
		)
	}
}
						</pre></code>
					</section>
					<section>
						<h2>Hero CSS</h2>
						<pre><code data-trim data-noescape class="small">
:host {
	display: block;
	position: absolute;
}
:host {
	transition: left 0.5s ease-in-out, top 0.5s ease-in-out;
}
						</pre></code>
					</section>
        <section>
          <section>
            <h2>Conclusions</h2>
            <ul>
							<li class="fragment">state vs rendering</li>
							<li class="fragment">absolute positioning</li>
						</ul>
          </section>
          <section>
            <h2>Questions</h2>
          </section>
        </section>
        <section>
          <section>
            <img src="https://style.cogneco.com/logo/cogneco-v6w.svg" />
            <p>
              <small>Simon Mika · simon.mika@cogneco.se · 0707-680 380</small>
            </p>
          </section>
        </section>
      </div>
    </div>

    <script src="https://reveal.simonmika.com/dist/reveal.js"></script>
    <script src="https://reveal.simonmika.com/plugin/zoom/zoom.js"></script>
    <script src="https://reveal.simonmika.com/plugin/notes/notes.js"></script>
    <script src="https://reveal.simonmika.com/plugin/search/search.js"></script>
    <script src="https://reveal.simonmika.com/plugin/markdown/markdown.js"></script>
    <script src="https://reveal.simonmika.com/plugin/highlight/highlight.js"></script>
    <script>
      // Also available as an ES module, see:
      // https://revealjs.com/initialization/
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
        hash: true,
        transition: "slide", // none/fade/slide/convex/concave/zoom

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [
          RevealZoom,
          RevealNotes,
          RevealSearch,
          RevealMarkdown,
          RevealHighlight,
        ],
      });
    </script>
  </body>
</html>
